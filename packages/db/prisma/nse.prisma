model NseIntrument {
    id          String @id @default(uuid())
    symbol      String @unique
    growwSymbol String @unique /// NSE-<symbol>
    name        String

    createdAt DateTime    @default(now())
    updatedAt DateTime    @updatedAt
    candles   NseCandle[]

    @@index([symbol, growwSymbol])
    @@map("nse_instruments")
}

model NseCandle {
    id String @id @default(uuid())

    instrument NseIntrument @relation(fields: [instrumentId], references: [id])
    timestamp  DateTime
    open       Decimal
    high       Decimal
    low        Decimal
    close      Decimal
    volume     BigInt

    instrumentId String
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt

    @@index([instrumentId, timestamp])
    @@map("nse_candles")
}

model NseHoliday {
    id   String   @id @default(uuid())
    date DateTime @unique

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([date])
    @@map("nse_holidays")
}
